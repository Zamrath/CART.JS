<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1">
	<title>Online Shopping Cart</title>
	<script src="js/angular.min.js"></script>
	<link href="css/new_css.css" rel="stylesheet">
	<style type="text/css">
	[ng\:cloak], [ng-cloak], .ng-cloak {	
		display: none !important;
	}
	</style>
</head>

<body ng-app=main>
	<!-- <script src="js/angular-bootstrap.js" type="text/javascript"></script> -->
	<script src="js/main.js"></script>
	<div class="container">
		<div><button type="button" onclick="openAuth()" style="width:300px;height:25px;">
			Go to Administration Panel</button></div>
		<h1>Cart.js</h1>

		<!-- Create a table to list the available products -->
		<div ng-controller="home" ng-cloak class="ng-cloak">
			<img src="../images/02.jpg" id="fixedImage" style="width:500px; height:400px;">
			<table id="t02">
				<caption>Cart</caption>
				<tr>
					<th>Product</th>
					<th>Number of items</th>
					<th>Price (LKR)</th>
				</tr>
				<tr ng-repeat="selectedProduct in selectedProducts">
					<td>{{ selectedProduct.name }}</td>
					<td><input name="quantity" type='number' min='1' max='{{selectedProduct.stock}}' ng-model="selectedProduct.quantity" ng-change="recalc(selectedProducts)"></td>
					<td>{{ selectedProduct.quantity*selectedProduct.price }}</div></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<th>{{totalPrice}}</th>
				</tr>
			</table><br />
			<div><input type="button" id="fixedButton" ng-click="purchaseProducts(selectedProducts)" style="margin-left:700px;position:absolute;transform:rotate(270deg);" value="Purchase"/></div>
			<table id="t01">
				<caption>Available products in the store</caption>
				<tr>
					<th>Product</th>
					<th>Price (LKR)</th>
					<th>Stocks</th>
					<th>Add to cart?</th>
				</tr>
				<tr ng-repeat="product in products">
					<td>{{ product.name }}</td>
					<td>{{ product.price }}</td>
					<td>{{ product.stock }}</td>
					<td><input type="checkbox" ng-checked="exists(product, selectedProducts)" ng-click="addToCart(product, selectedProducts)"></input></td>
				</tr>
			</table><br />
			<div><input type="button" ng-click="updateTable()" style="margin-left:430px;" value="Update"/></div>
		</div>
		
		<script language="javascript">
			function openAuth(){
				window.open("authentication.html")
			}
		</script>
		
	</div>
</body>
</html>